# DEBIAN_PKG_PRACTICE   
Debian 패키징   

## dpkg 명령어  
- `dpkg -l` : 설치된 패키지 목록 확인  
- `dpkg -L [패키지명]` : 해당 패키지로부터 설치된 모든 파일목록 확인     
- `dpkg -C [.deb 파일]` : 해당 .deb 파일이 설치한 파일의 목록 확인   
- `dpkg -s [패키지명]` : 해당 패키지에 대한 정보 확인   
- `dpkg -S [파일명]` : 해당 파일명 또는 경로가 포함된 패키지들을 검색   
- `dpkg -I [.deb파일]` : 해당 .deb 파일에 대한 정보 확인   
- `dpkg -P [패키지명]` : 패키지에 대한 정보를 보여준다.   
- `dpkg -i [.deb 파일]` : 해당 파일 설치 또는 최신 버전으로 업그레이드  
- `dpkg -r [패키지명]` : 해당 패키지 삭제 (삭제시 설정파일들은 남겨둡니다.)  
- `dpkg -P [패키지명]` : 해당 패키지와 해당 패키지의 설정파일을 모두 삭제   
- `dpkg -x [.deb 파일] [디렉토리]` : 파일에 포함되어 있는 파일들을 지정된 디렉토리에 압축 해제(이 명령을 실행할 경우, 해당 디렉토리를 **초기화** 시킵니다.)   
- `dpkg --unpack [.deb 파일]` : 환경 설정은 하지 않고 패키지를 풀기만 한다.   
- `dpkg --configure [패키지명]` : `--unpack` 옵션으로 풀린 패키지를 환경 설정할 때 사용한다.   

### DEBIAN/control

### abort 옵션   
- abort-upgrade: 이 옵션은 패키지 업그레이드 작업을 중단합니다. 패키지 업그레이드 중 문제가 발생하면 이 옵션을 사용하여 업그레이드 작업을 중지하고 이전 버전으로 되돌릴 수 있습니다.   
- abort-remove: 이 옵션은 패키지 삭제 작업을 중단합니다. 패키지 삭제 중 문제가 발생하면 이 옵션을 사용하여 삭제 작업을 중지하고 이전 상태로 되돌릴 수 있습니다.   
- abort-deconfigure: 이 옵션은 패키지 구성 작업을 중단합니다. 패키지 구성 중 문제가 발생하면 이 옵션을 사용하여 구성 작업을 중지하고 이전 상태로 되돌릴 수 있습니다.   
이러한 옵션은 패키지 관리 작업을 수행하는 도중 문제가 발생할 경우 사용할 수 있습니다. 이를 통해 문제를 해결하고 시스템을 안정적인 상태로 되돌릴 수 있습니다.   
- Ex)   
```
#!/bin/bash
############################################################
# postinst script
############################################################

set -e

case "$1" in
    configure)
                echo "configure in postinst"
        ;;
        abort-upgrade|abort-remove|abort-deconfigure)
                echo "Abort in postinst!"
                exit 1
                ;;
    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
        ;;
esac

exit
```
